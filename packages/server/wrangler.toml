name = "ota-update-server"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# D1 Database for metadata
[[d1_databases]]
binding = "DB"
database_name = "ota-update-db"
database_id = "2151f4f3-33a6-4e10-af3c-ded8e1cfbc8e"

# KV Namespace for caching
[[kv_namespaces]]
binding = "CACHE"
id = "252275fa877e45c3902ed48905e98f33"

# R2 Bucket for bundle storage
[[r2_buckets]]
binding = "BUNDLES"
bucket_name = "ota-update-bundles"

# Environment variables
[vars]
ENVIRONMENT = "development"

# Production environment
[env.production]
vars = { ENVIRONMENT = "production" }

# Rate limiting (optional, requires paid plan)
# [[unsafe.bindings]]
# name = "RATE_LIMITER"
# type = "ratelimit"
# namespace_id = "1001"
# simple = { limit = 100, period = 60 }
